!function(e){var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class r{constructor(){this.layout={RUS:[["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del"],["CapsLk","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift"],["Ctrl","Win","Alt","","Alt","Ctrl","◄","▼","►"]],ENG:[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del"],["CapsLk","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift"],["Ctrl","Win","Alt","","Alt","Ctrl","◄","▼","►"]]},this.keyCodesClass=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"]],this.specialKeys=["Backspace","Tab","CapsLock","ShiftLeft","ShiftRight","Enter","ControlLeft","MetaLeft","AltLeft","Space","Delete","AltRight","ControlRight","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],this.capsLock="",this.shiftLeft="",this.shiftRight=""}generateLayout(e){const t=document.createElement("div"),s=document.createElement("textarea"),r=document.createElement("div"),a=document.createElement("div");t.classList.add("container"),r.classList.add("keyboard"),a.classList.add("control-info"),a.innerHTML="<h2>Switch lang: left Shift + left Alt or right Shift + right Alt</h2><h3>Made in Windows OC</h3>",this.layout[e].forEach((e,t)=>{const s=document.createElement("div");e.forEach((e,r)=>{s.append(this.createKey(e,t,r))}),s.classList.add("row"),r.append(s)}),document.body.append(t),t.append(s,r,a),this.textarea=document.querySelector("textarea"),this.capsLock=document.querySelector(".CapsLock"),this.shiftLeft=document.querySelector(".ShiftLeft"),this.shiftRight=document.querySelector(".ShiftRight"),this.keyboardListener(),this.mouseListener(r)}switchLang(){"RUS"===this.getCurrentLang()?this.generateNewLayout("ENG"):this.generateNewLayout("RUS")}generateNewLayout(e){let t=!1;this.isUpperKeys()&&(t=!0),this.isCapsActive()&&this.isShiftActive()&&(t=!1),this.keyCodesClass.forEach((s,r)=>{s.forEach((s,a)=>{const i=document.querySelector(`.${this.keyCodesClass[r][a]}`);this.canSwitch(i)&&(t?i.innerText!==this.upperCaseForKeys(`${this.layout[e][r][a]}`)&&(i.innerHTML=this.upperCaseForKeys(`${this.layout[e][r][a]}`)):i.innerText!==`${this.layout[e][r][a]}`&&(i.innerHTML=`${this.layout[e][r][a]}`))})}),localStorage.setItem("lang",`${this.getCurrentLang()}`)}keyboardListener(){window.addEventListener("keydown",e=>{if("Arrow"===e.code.substr(0,5))return document.querySelector(`.${e.code}`).classList.add("active"),void this.textarea.focus();e.preventDefault(),document.querySelector(`.${e.code}`)&&("CapsLock"===e.code?document.querySelector(`.${e.code}`).classList.toggle("active"):document.querySelector(`.${e.code}`).classList.add("active"),this.isShiftsAltActive(),this.enterKey(e.code))}),window.addEventListener("keyup",e=>{document.querySelector(`.${e.code}`)&&("CapsLock"!==e.code&&document.querySelector(`.${e.code}`).classList.remove("active"),this.generateNewLayout(this.getCurrentLang()))})}mouseListener(e){e.addEventListener("mousedown",e=>{"key"===e.target.classList[0]&&("CapsLock"===e.target.classList[1]?e.target.classList.toggle("active"):e.target.classList.add("active"),this.textarea.focus(),this.isShiftsAltActive(),this.enterKey(e.target.classList[1]),e.target.addEventListener("mouseout",()=>{"CapsLock"!==e.target.classList[1]&&e.target.classList.remove("active"),this.generateNewLayout(this.getCurrentLang())}))}),e.addEventListener("mouseup",e=>{"CapsLock"!==e.target.classList[1]&&e.target.classList.remove("active"),this.generateNewLayout(this.getCurrentLang())})}createKey(e,t,s){const r=document.createDocumentFragment(),a=document.createElement("div");return a.classList.add("key",`${this.keyCodesClass[t][s]}`),a.innerHTML=e,r.append(a),r}isShiftActive(){return"active"===this.shiftLeft.classList[2]||"active"===this.shiftRight.classList[2]}isCapsActive(){return"active"===this.capsLock.classList[2]}getCurrentLang(){let e=document.querySelectorAll(".row")[1].children[1].innerText;return e=e.toLowerCase()===this.layout.ENG[1][1]?"ENG":"RUS",e}isShiftsAltActive(){const e=document.querySelector(".AltLeft"),t=document.querySelector(".AltRight");("active"===e.classList[2]&&"active"===this.shiftLeft.classList[2]||"active"===t.classList[2]&&"active"===this.shiftRight.classList[2])&&this.switchLang(),this.isUpperKeys()&&this.generateNewLayout(this.getCurrentLang())}isUpperKeys(){return"active"===this.shiftRight.classList[2]||"active"===this.shiftLeft.classList[2]||"active"===this.capsLock.classList[2]}enterKey(e){const t=document.querySelector(`.${e}`),s=this.textarea.selectionStart,r=this.textarea.selectionEnd,a=this.textarea.value.slice(s,r),i=this.textarea.value.slice(s,r),c=this;switch(t.classList[1]){case"Enter":this.textarea.setRangeText(`\n${a}`,s,r,"end");break;case"Space":this.textarea.setRangeText(" ",s,r,"end");break;case"Tab":this.textarea.setRangeText(`\t${i}`,s,r,"end");break;case"Backspace":if(0===s&&0===r)break;this.textarea.setRangeText("",s===r?s-1:s,r,"end");break;case"Delete":this.textarea.setRangeText("",s,r===s?r+1:r,"end");break;case"ArrowLeft":this.textarea.selectionStart-=1,this.textarea.selectionEnd=this.textarea.selectionStart;break;case"ArrowRight":this.textarea.selectionStart+=1,this.textarea.selectionEnd=this.textarea.selectionStart;break;case"ArrowUp":this.textarea.selectionStart=0,this.textarea.selectionEnd=this.textarea.selectionStart;break;case"ArrowDown":this.textarea.selectionStart=this.textarea.value.length,this.textarea.selectionEnd=this.textarea.selectionStart;break;default:this.canSwitch(t)&&this.textarea.setRangeText(t.innerText,s,r,"end")}setTimeout(()=>c.textarea.focus(),1)}canSwitch(e){let t=!0;return this.specialKeys.forEach(s=>{e.classList[1]===s&&(t=!1)}),t}upperCaseForKeys(e){if("ENG"===this.getCurrentLang())switch(e){case"2":return"@";case"3":return"#";case"4":return"$";case"6":return"^";case"7":return"&";case"[":return"{";case"]":return"}";case"'":return'"';case",":return"<";case".":return">";case"/":return"?";case"`":return"~";case";":return":"}else switch(e){case"2":return'"';case"3":return"№";case"4":return";";case"6":return":";case"7":return"?";case".":return","}switch(e){case"1":return"!";case"5":return"%";case"8":return"*";case"9":return"(";case"0":return")";case"\\":return"|";case"-":return"_";case"=":return"+";default:return e.toUpperCase()}}}window.onload=()=>{(new r).generateLayout(localStorage.getItem("lang")||"RUS")}}]);